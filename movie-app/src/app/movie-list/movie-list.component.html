<div class="container">
  <div class="container-title">
    <h1>Movies</h1>
  </div>

  <div id="container-actions">
    <input id="search-bar" class="sub-form-input-text" type="text" placeholder="Search movies..." (input)="onSearchChange($event)">
    <button class="button-actions-general" routerLink="/movies/new">Add Movie</button>
  </div>

  <div id="container-movies">
    <table>
      <thead>
      <tr>
        <th>
          <div class="table-header">
            <p>RELEASE DATE</p>
            <button class="button-actions-specific" (click)="sortMovies('releaseDate')">⇅</button>
          </div>
        </th>
        <th>
          <div class="table-header">
            <p>TITLE</p>
            <button class="button-actions-specific" (click)="sortMovies('title')">⇅</button>
          </div>
        </th>
        <th id="th-directors"> <div class="table-header"> <p>DIRECTORS</p> </div> </th>
        <th id="th-screenplay"> <div class="table-header"> <p>📜</p> </div>  </th>
        <th id="th-acting"> <div class="table-header"> <p>🎭</p> </div>  </th>
        <th id="th-photography"> <div class="table-header"> <p>📸</p> </div> </th>
        <th id="th-entertainment"> <div class="table-header"> <p>🎉</p> </div> </th>
        <th id="th-recommended"> <div class="table-header"> <p>👍</p> </div> </th>
        <th id="th-average"> <div class="table-header"> <p>⭐</p> </div> </th>
        <th id="th-details">  </th>
      </tr>
      </thead>
      <tbody>
        @for (movie of filteredMovies; track $index) {
          <tr>
            <td class="row-label-number"> <label>{{ movie.releaseDate }}</label> </td>
            <td> <label>{{ movie.title }}</label> </td>
            <td> <label>{{ formatArray(movie.directedBy) }}</label> </td>
            <td class="row-label-number"> <label>{{ formatRating(movie.personalRating.screenplay) }}</label> </td>
            <td class="row-label-number"> <label>{{ formatRating(movie.personalRating.acting) }}</label> </td>
            <td class="row-label-number"> <label>{{ formatRating(movie.personalRating.photography) }}</label> </td>
            <td class="row-label-number"> <label>{{ formatRating(movie.personalRating.entertainment) }}</label> </td>
            <td class="row-label-number"> <label>{{ formatRating(movie.personalRating.recommended) }}</label> </td>
            <td class="row-label-number"> <label>{{ formatRating(calculateAverageRating(movie)) }}</label> </td>
            <td class="row-label-number">
              <a [routerLink]="['/movies', movie.id]"
                 (mouseenter)="onMouseEnter(movie.id)"
                 (mouseleave)="onMouseLeave()"
                 (animationend)="onAnimationEnd(movie.id)"
                 [class.animated]="animatingMovieId === movie.id">
                <label>{{ hoveredMovieId === movie.id ? '👀' : '👁️' }}</label>
              </a>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>

